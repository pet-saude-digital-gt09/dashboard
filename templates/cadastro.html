{% extends 'layout.html' %}

{% block content %}
<div class="login-container">
    <div class="card">
        <h2>üë§ Novo Cadastro</h2>
        <p>Crie sua conta para acessar o sistema.</p>
        
        <form method="POST" action="{{ url_for('cadastro') }}">
            
            <div class="form-group">
                <label for="nome">Nome Completo</label>
                <input type="text" id="nome" name="nome" class="form-control" required>
            </div>

            <div class="form-group">
                <label for="cpf">CPF (apenas n√∫meros)</label>
                <input type="text" id="cpf" name="cpf" class="form-control" maxlength="11" required>
            </div>
            
            <div class="form-group">
                <label for="senha">Defina uma Senha</label>
                <input type="password" id="senha" name="senha" class="form-control" required>
            </div>

            <div class="form-group">
                <label for="confirmar_senha">Confirme a Senha</label>
                <input type="password" id="confirmar_senha" name="confirmar_senha" class="form-control" required>
            </div>

            <div class="form-group">
                <label>Grupo de Risco (Selecione todos que se aplicam):</label>
                
                <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 5px;">
                    <div style="display: flex; align-items: center;">
                        <input type="checkbox" id="hipertenso" name="grupo_risco" value="Hipertenso" style="width: auto; margin-right: 5px;">
                        <label for="hipertenso" style="margin: 0; font-weight: normal;">Hipertenso</label>
                    </div>

                    <div style="display: flex; align-items: center;">
                        <input type="checkbox" id="diabetico" name="grupo_risco" value="Diab√©tico" style="width: auto; margin-right: 5px;">
                        <label for="diabetico" style="margin: 0; font-weight: normal;">Diab√©tico</label>
                    </div>

                    <div style="display: flex; align-items: center;">
                        <input type="checkbox" id="sem_comorbidade" name="grupo_risco" value="Sem comorbidade" style="width: auto; margin-right: 5px;">
                        <label for="sem_comorbidade" style="margin: 0; font-weight: normal;">Sem comorbidade</label>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Cadastrar</button>
        </form>
        
        <hr style="margin: 20px 0 10px 0; border-top: 1px solid #eee;">
        <p style="text-align: center; margin: 0;">
            J√° tem uma conta? <a href="{{ url_for('login') }}">Fa√ßa login aqui</a>
        </p>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkSemComorbidade = document.getElementById('sem_comorbidade');
        const checkHipertenso = document.getElementById('hipertenso');
        const checkDiabetico = document.getElementById('diabetico');
        
        // Lista com as doen√ßas (excluindo o "sem comorbidade")
        const doencas = [checkHipertenso, checkDiabetico];

        // 1. Se clicar em "Sem comorbidade", desmarca os outros
        checkSemComorbidade.addEventListener('change', function() {
            if (this.checked) {
                doencas.forEach(checkbox => checkbox.checked = false);
            }
        });

        // 2. Se clicar em alguma doen√ßa, desmarca "Sem comorbidade"
        doencas.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    checkSemComorbidade.checked = false;
                }
            });
        });
    });
</script>
{% endblock %}